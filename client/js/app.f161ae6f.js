(function(t){function e(e){for(var a,r,n=e[0],c=e[1],l=e[2],m=0,u=[];m<n.length;m++)r=n[m],Object.prototype.hasOwnProperty.call(o,r)&&o[r]&&u.push(o[r][0]),o[r]=0;for(a in c)Object.prototype.hasOwnProperty.call(c,a)&&(t[a]=c[a]);d&&d(e);while(u.length)u.shift()();return i.push.apply(i,l||[]),s()}function s(){for(var t,e=0;e<i.length;e++){for(var s=i[e],a=!0,n=1;n<s.length;n++){var c=s[n];0!==o[c]&&(a=!1)}a&&(i.splice(e--,1),t=r(r.s=s[0]))}return t}var a={},o={app:0},i=[];function r(e){if(a[e])return a[e].exports;var s=a[e]={i:e,l:!1,exports:{}};return t[e].call(s.exports,s,s.exports,r),s.l=!0,s.exports}r.m=t,r.c=a,r.d=function(t,e,s){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:s})},r.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var s=Object.create(null);if(r.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)r.d(s,a,function(e){return t[e]}.bind(null,a));return s},r.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="/";var n=window["webpackJsonp"]=window["webpackJsonp"]||[],c=n.push.bind(n);n.push=e,n=n.slice();for(var l=0;l<n.length;l++)e(n[l]);var d=c;i.push([0,"chunk-vendors"]),s()})({0:function(t,e,s){t.exports=s("56d7")},"07c5":function(t,e,s){"use strict";var a=s("71fd"),o=s.n(a);o.a},1:function(t,e){},"1ab2":function(t,e,s){"use strict";var a=s("d6f3"),o=s.n(a);o.a},"3c7c":function(t,e,s){},"56d7":function(t,e,s){"use strict";s.r(e);var a=s("2b0e"),o=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"app"}},[s("navbar"),t._v(" "),s("router-view")],1)},i=[],r=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("nav",{staticClass:"navbar fixed-top navbar-expand-lg navbar-light bg-light shadow pb-0"},[s("router-link",{staticClass:"navbar-brand font-pacifico",staticStyle:{"font-size":"1.5rem"},attrs:{to:{name:"home"}}},[t._v("Echo")]),t._v(" "),t._m(0),t._v(" "),s("div",{staticClass:"collapse navbar-collapse",attrs:{id:"navbarText"}},[s("ul",{staticClass:"navbar-nav mr-auto"},[s("li",{staticClass:"nav-item",class:{active:"home"==t.$route.name}},[s("router-link",{staticClass:"nav-link",attrs:{to:{name:"home"}}},[t._v("Home")])],1),t._v(" "),t.$auth.isAuthenticated?s("li",{staticClass:"nav-item",class:{active:"profile"==t.$route.name}},[s("router-link",{staticClass:"nav-link",attrs:{to:{name:"profile"}}},[t._v("Profile")])],1):t._e()]),t._v(" "),s("span",{staticClass:"navbar-text"},[t.$auth.isAuthenticated?s("button",{staticClass:"btn btn-danger",on:{click:t.logout}},[t._v("logout")]):s("button",{staticClass:"btn btn-success",on:{click:t.login}},[t._v("Login")])])])],1)},n=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("button",{staticClass:"navbar-toggler border-0",attrs:{type:"button","data-toggle":"collapse","data-target":"#navbarText","aria-controls":"navbarText","aria-expanded":"false","aria-label":"Toggle navigation"}},[s("span",{staticClass:"navbar-toggler-icon"})])}],c=s("bc3a"),l=s.n(c);l.a.create({baseURL:"https://localhost:3000",withCredentials:!0});var d={name:"Navbar",methods:{async login(){await this.$auth.loginWithPopup(),this.$store.dispatch("setBearer",this.$auth.bearer),this.$store.dispatch("getProfile"),console.log("this.$auth.user: "),console.log(this.$auth.user)},async logout(){await this.$auth.logout({returnTo:window.location.origin})}}},m=d,u=s("2877"),p=Object(u["a"])(m,r,n,!1,null,null,null),h=p.exports,v=s("335d"),f={name:"App",async beforeCreate(){try{await Object(v["c"])(),this.$store.dispatch("setBearer",this.$auth.bearer),this.$store.dispatch("getProfile")}catch(t){this.$router.push({name:"home"})}},components:{Navbar:h}},C=f,g=(s("5c0b"),Object(u["a"])(C,o,i,!1,null,null,null)),_=g.exports,b=s("8c4f"),w=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{ref:"scrollArea",staticClass:"home container-fluid mt-5"},[s("div",{staticClass:"row"},[s("div",{staticClass:"col-3"}),t._v(" "),s("div",{staticClass:"col-6"}),t._v(" "),s("div",{staticClass:"col-3"},[t.$auth.isAuthenticated?s("CreatePostComp"):t._e()],1)]),t._v(" "),s("div",{staticStyle:{height:"3.5rem"}}),t._v(" "),t._l(t.posts,(function(t){return s("PostComp",{key:t.id,attrs:{postData:t}})})),t._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:!t.lastLoaded,expression:"!lastLoaded"}],ref:"bottomTrigger",staticClass:"col-12"},[t._m(0),t._v(" "),s("div",{staticClass:"spinner-grow spinner-grow-sm",attrs:{role:"status"}}),t._v(" "),s("div",{staticClass:"spinner-grow spinner-grow-sm",attrs:{role:"status"}})])],2)},y=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"spinner-grow spinner-grow-sm",attrs:{role:"status"}},[s("span",{staticClass:"sr-only"},[t._v("Loading...")])])}],P=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"postComp font-didact mx-auto col-md-7"},[s("div",{staticClass:"card bg-white shadow my-3 mx-0"},[t._m(0),t._v(" "),t.postData.picture?s("img",{staticClass:"card-img-top shadow",attrs:{src:t.postData.picture}}):t._e(),t._v(" "),s("div",{staticClass:"card-body pb-2"},[s("h4",{staticClass:"card-title font-didact mb-1"},[t._v(t._s(t.postData.title))]),t._v(" "),s("p",{directives:[{name:"show",rawName:"v-show",value:t.displayContent,expression:"displayContent"}],class:{"overflow-hidden":!t.showMore,heightSomething:!t.showMore,"card-text":t.displayContent},on:{click:function(e){t.seeMoreContent()}}},[t._v(t._s(t.postData.content))]),t._v(" "),t.$auth.isAuthenticated?s("div",{staticClass:"card-footer px-2 pb-0 pt-3 bg-white"},[s("div",[s("a",{directives:[{name:"show",rawName:"v-show",value:t.showButton,expression:"showButton"}],staticClass:"btn btn-primary mb-3 text-white font-didact",attrs:{href:"#"},on:{click:function(e){e.preventDefault(),t.chooseSupport()}}},[t._v("support")]),t._v(" "),s("a",{directives:[{name:"show",rawName:"v-show",value:t.showButton,expression:"showButton"}],staticClass:"btn btn-secondary mb-3 text-white font-didact",attrs:{href:"#"},on:{click:function(e){e.preventDefault(),t.chooseDisregard()}}},[t._v("disregard")]),t._v(" "),t.showButton?t._e():s("ResultsComp",{attrs:{postData:t.postData}}),t._v(" "),s("p",{directives:[{name:"show",rawName:"v-show",value:!t.showButton,expression:"!showButton"}],staticClass:"mb-0 pb-0 font-didact outline",on:{click:function(e){t.goToDetails()}}},[t._v("Join the Conversation")])],1)]):s("div",[s("button",{staticClass:"btn btn-dark",on:{click:function(e){t.logInUser()}}},[t._v("Log in to vote")])])])])])},$=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"row"},[s("div",{staticClass:"col-6"}),t._v(" "),s("div",{staticClass:"col-6"})])}],x=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"ResultsComp container"},[s("div",{staticClass:"row"},[s("div",{staticClass:"col-2 px-0 font-didact text-center"},[t._v(t._s(t.supportPercent)+"%")]),t._v(" "),s("div",{staticClass:"col-8 px-0 mt-1"},[s("div",{staticClass:"progress bg-secondary",staticStyle:{height:"12px","border-radius":"1px"}},[s("div",{staticClass:"progress-bar",staticStyle:{height:"12px","border-radius":"1px"},style:t.resultsBar,attrs:{role:"progressbar","aria-valuenow":"25","aria-valuemin":"0","aria-valuemax":"100"}})])]),t._v(" "),s("div",{staticClass:"col-2 px-0 font-didact text-center"},[t._v(t._s(t.disregardPercent)+"%")])])])},D=[],k={name:"ResultsComp",data(){return{sumValue:0,supportValue:0,disregardValue:0,resultsBar:"",supportPercent:"",disregardPercent:""}},props:["postData"],mounted(){this.calculatePercent()},computed:{},methods:{calculatePercent(){this.supportValue=this.postData.support.length,this.disregardValue=this.postData.disregard.length,this.sumValue=this.supportValue+this.disregardValue,this.resultsBar="width:"+this.supportValue/this.sumValue*100+"%",this.supportPercent=Math.round(this.supportValue/this.sumValue*100),this.disregardPercent=Math.round(this.disregardValue/this.sumValue*100)}},components:{}},E=k,O=Object(u["a"])(E,x,D,!1,null,"3621fceb",null),R=O.exports,S={name:"postComp",props:["postData"],data(){return{displayContent:!0,showMore:!1,showButton:!0,chooseVote:{}}},mounted(){},created(){this.hideButtons()},watch:{user:function(t,e){this.hideButtons()}},computed:{user(){return this.$store.state.user},choice(){}},methods:{chooseSupport(){this.postData.support.push(this.$auth.user.email),this.chooseVote.choice=!0,this.chooseVote.title=this.postData.title,this.chooseVote.id=this.postData.id,this.$store.dispatch("addUserInput",this.chooseVote),this.showButton=!1},seeMoreContent(){this.showMore=!this.showMore},chooseDisregard(){this.postData.disregard.push(this.$auth.user.email),this.chooseVote.choice=!1,this.chooseVote.title=this.postData.title,this.chooseVote.id=this.postData.id,this.$store.dispatch("addUserInput",this.chooseVote),this.showButton=!1},async logInUser(){await this.$auth.loginWithPopup(),this.$store.dispatch("setBearer",this.$auth.bearer),this.$store.dispatch("getProfile")},goToDetails(){this.$store.commit("setActivePost",{}),this.$router.push({name:"postDetails",params:{postId:this.postData.id}})},showResults(){this.showButton=!1},hideButtons(){if(this.$auth.isAuthenticated){let t=this.postData.support.find(t=>t==this.$auth.user.email);t&&(this.showButton=!1)}if(this.$auth.isAuthenticated){let t=this.postData.disregard.find(t=>t==this.$auth.user.email);t&&(this.showButton=!1)}}},components:{ResultsComp:R}},A=S,B=(s("1ab2"),Object(u["a"])(A,P,$,!1,null,"35d118ea",null)),L=B.exports,T=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"createPostComp"},[s("div",{staticClass:"modal fade",attrs:{id:"orangeModalSubscription",tabindex:"-1","aria-labelledby":"myModalLabel","aria-hidden":"true"}},[s("div",{staticClass:"modal-dialog modal-notify modal-warning",attrs:{role:"document"}},[s("div",{staticClass:"modal-content m-auto"},[this.$auth.user.email_verified?s("div",{staticClass:"modal-header text-center"},[s("h4",{staticClass:"modal-title white-text w-100 font-weight-bold py-2"},[t._v("Create a Post")]),t._v(" "),t._m(0)]):t._e(),t._v(" "),this.$auth.user.email_verified?s("div",{staticClass:"modal-body"},[s("div",{staticClass:"md-form mb-4"},[s("label",{attrs:{"data-error":"wrong","data-success":"right",for:"form3"}},[t._v("Title")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.newPost.title,expression:"newPost.title"}],staticClass:"form-control",attrs:{required:"",type:"text",id:"form3"},domProps:{value:t.newPost.title},on:{input:function(e){e.target.composing||t.$set(t.newPost,"title",e.target.value)}}})]),t._v(" "),s("div",{staticClass:"md-form"},[s("label",{attrs:{"data-error":"wrong","data-success":"right",for:"form2"}},[t._v("Content")]),t._v(" "),s("textarea",{directives:[{name:"model",rawName:"v-model",value:t.newPost.content,expression:"newPost.content"}],staticClass:"form-control",attrs:{type:"text",id:"form2",rows:"5",cols:"20"},domProps:{value:t.newPost.content},on:{input:function(e){e.target.composing||t.$set(t.newPost,"content",e.target.value)}}})]),t._v(" "),s("div",{staticClass:"md-form justify-content-center mt-4"},[s("label",{attrs:{"data-error":"wrong","data-success":"right",for:"form4"}},[t._v("Add Image")]),t._v(" "),s("input",{staticClass:"form-control p-1",attrs:{type:"file",id:"form4",accept:"image/*"},on:{change:t.encodeImage}})]),t._v(" "),s("div",{staticClass:"justify-content-center"},[s("button",{directives:[{name:"show",rawName:"v-show",value:!t.hideAddPost,expression:"!hideAddPost"}],staticClass:"btn btn-primary waves-effect my-3 shadow",attrs:{type:"button","data-dismiss":"modal"},on:{click:function(e){e.preventDefault(),t.addPost()}}},[t._v("Post")]),t._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:t.hideAddPost,expression:"hideAddPost"}],staticClass:"spinner-border mt-3",attrs:{role:"status"}}),t._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:t.hideAddPost,expression:"hideAddPost"}]},[s("p",[t._v("Uploading Image...")])]),t._v(" "),s("div",{staticClass:"modal-footer",attrs:{id:"imageUpload"}})])]):t._e(),t._v(" "),this.$auth.user.email_verified?t._e():s("div",{staticClass:"modal-body"},[s("div",{staticClass:"md-form font-didact"},[t._v("In order to create a post, please verify your email: "),s("b",[t._v(t._s(this.$auth.user.email))])])])])])]),t._v(" "),t._m(1)])},I=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[s("span",{staticClass:"white-text",attrs:{"aria-hidden":"true"}},[t._v("Ã—")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"text-center fixed-top mt-5 pt-4 mr-4"},[s("a",{staticClass:"btn bg-dark text-white shadow float-right",staticStyle:{"border-radius":"50%","z-index":"1"},attrs:{href:"","data-toggle":"modal","data-target":"#orangeModalSubscription"}},[t._v("+")])])}],M=s("8aa5"),j=s.n(M),N={name:"createPostComp",props:["createData"],data(){return{hideAddPost:!1,newPost:{support:[],disregard:[]}}},computed:{},methods:{async addPost(){this.newPost.support[0]=this.$auth.user.email,this.$store.dispatch("addPost",this.newPost)},async encodeImage(t){this.hideAddPost=!0;let e=t.target.files[0];const s=j.a.storage().ref(`${e.name} - ${e.lastModified}`).put(e);s.on("state_changed",t=>{console.log(t.bytesTransferred/t.totalBytes*100)},t=>{console.log(t.message)},()=>{s.snapshot.ref.getDownloadURL().then(t=>{this.newPost.picture=t,this.hideAddPost=!1})}),console.log("this is our event",t.target.files[0])}},components:{}},V=N,U=Object(u["a"])(V,T,I,!1,null,"39bf6f3f",null),H=U.exports,J={name:"home",data(){return{newest:!0,showLoading:!0}},mounted(){let t=new IntersectionObserver(this.loadNextPosts,{rootMargin:"200px",threshold:0});t.observe(this.$refs.bottomTrigger)},computed:{posts(){if(this.newest)return this.$store.state.posts.sort((t,e)=>Date.parse(e.createdAt)-Date.parse(t.createdAt))},loadingPosts(){return this.$store.state.loadingPosts},lastLoaded(){return this.$store.state.lastLoaded},timestamp(){return this.$store.state.timestamp}},methods:{async loadNextPosts(){0==this.loadingPosts&&0==this.lastLoaded&&(this.$store.commit("setLoadingPosts",!0),await this.$store.dispatch("getPosts",this.posts.length),console.log("Near the bottom???"))}},components:{CreatePostComp:H,PostComp:L}},z=J,q=(s("07c5"),Object(u["a"])(z,w,y,!1,null,"26d9f328",null)),F=q.exports,Y=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"profile pt-3 mt-5"},[s("p",[t._v("My Profile")]),t._v(" "),s("div",[t._v(t._s(this.user.name)+" ")]),t._v(" "),s("div",[t._v(t._s(this.user.email))])])},Q=[],W={name:"profile",data(){return{}},computed:{user(){return this.$store.state.user}},mounted(){this.$store.dispatch("getProfile")},methods:{},components:{}},X=W,G=Object(u["a"])(X,Y,Q,!1,null,"101db5ac",null),K=G.exports,Z=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"postDetails mt-5 vh-100"},[s("div",{staticClass:"postComp"},[s("div",{staticClass:"card m-2"},[s("div",{staticClass:"card-header text-right rounded"},[s("div",{staticClass:"dropdown show"},[t._m(0),t._v(" "),s("div",{staticClass:"dropdown-menu",attrs:{"aria-labelledby":"dropdownMenuLink"}},[s("a",{staticClass:"dropdown-item ml-2",attrs:{href:"#"},on:{click:function(e){t.reportPost()}}},[t._v("Report Post")]),t._v(" "),this.$auth.user.email==this.post.creatorEmail?s("button",{staticClass:"btn text-danger btn-sm ml-4",staticStyle:{"font-size":"1.1rem"},attrs:{"data-toggle":"tooltip","data-placement":"top",title:"Delete This Post"},on:{click:function(e){t.deletePost()}}},[t._v("Delete Post")]):t._e()])])]),t._v(" "),t.post.picture?s("img",{staticClass:"card-img-top shadow",attrs:{src:t.post.picture}}):t._e(),t._v(" "),s("div",{staticClass:"card-body"},[s("h5",{staticClass:"card-title"},[s("strong",[t._v(t._s(t.post.title))])]),t._v(" "),s("hr"),t._v(" "),s("p",{staticClass:"card-text"},[t._v(t._s(t.post.content))])]),t._v(" "),s("div",{staticClass:"card-footer px-0"},[s("h3",[t._v(t._s(t.thread)+"'s Thread")]),t._v(" "),t.post.id?s("ResultsComp",{key:t.post.id,attrs:{postData:t.post}}):t._e()],1)])]),t._v(" "),s("div",{staticClass:"card m-1"},[t._m(1),t._v(" "),s("div",{staticClass:"card-body mt-0 pl-0 mb-5"},t._l(t.comments,(function(t){return s("commentComp",{key:t.id,attrs:{commentData:t}})})))]),t._v(" "),s("div",[s("CreateCommentComp")],1)])},tt=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("button",{staticClass:"bg-transparent border-0",attrs:{href:"#",role:"button",id:"dropdownMenuLink","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"}},[s("i",{staticClass:"fas fa-ellipsis-h"})])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"card-title border-bottom mt-2 mx-3 justify-content-center font-didact"},[s("h4",[t._v("comments")])])}],et=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"commentComp"},[s("div",{staticClass:"row justify-content-center border-top py-2"},[s("div",{staticClass:"col-10"}),t._v(" "),s("div",{staticClass:"dropdown show"},[t._m(0),t._v(" "),s("div",{staticClass:"dropdown-menu dropdown-menu-right",attrs:{"aria-labelledby":"dropdownMenuLink"}},[s("a",{staticClass:"dropdown-item ml-2",attrs:{href:"#"},on:{click:function(e){t.reportComment()}}},[t._v("Report Comment")]),t._v(" "),this.$auth.user.email==this.commentData.creatorEmail?s("button",{staticClass:"btn text-danger btn-sm ml-3",staticStyle:{"font-size":"1.1rem"},on:{click:function(e){t.deleteComment()}}},[t._v("Delete Comment")]):t._e()])])]),t._v(" "),s("div",{staticClass:"col-10 text-left ml-0"},[s("h5",[s("i",{staticClass:"far fa-user-circle text-black pr-2",attrs:{"aria-hidden":"true"}}),t._v(t._s(t.commentData.content))])]),t._v(" "),s("p",{staticClass:"text-right",staticStyle:{"font-size":"13px"}},[t._v(t._s(t.date()))])])},st=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("button",{staticClass:"bg-transparent border-0",attrs:{href:"#",role:"button",id:"dropdownMenuLink","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"}},[s("i",{staticClass:"fas fa-ellipsis-h"})])}];const at="betasaur-echo.auth0.com",ot="https://betasaur-echo.com",it="RAYctHhDjt24LSyp2C78MijFQI1dqDyQ",rt="712043498613768212/eHV9C_GyQUM2lAxxsqQPrLJnlonIW-LsfZJ91rXvItWt5UlqFl4b1IR1pj5vMljQMF-E",nt={apiKey:"AIzaSyC6caBv_PUysA60Ej569_gGA88ONbsdtXA",authDomain:"betasaur-echo-1.firebaseapp.com",databaseURL:"https://betasaur-echo-1.firebaseio.com",projectId:"betasaur-echo-1",storageBucket:"betasaur-echo-1.appspot.com",messagingSenderId:"992394261094",appId:"1:992394261094:web:e2f324aeb0a37753f8b3a7"};var ct={name:"commentComp",props:["commentData"],data(){return{}},computed:{},methods:{deleteComment(){Swal.fire({title:"Are you sure?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!"}).then(t=>{t.value&&(Swal.fire("Deleted!","Your Comment has been deleted.","success"),this.$store.dispatch("deleteComment",this.commentData))})},reportComment(){var t=new XMLHttpRequest;t.open("POST","https://discordapp.com/api/webhooks/"+rt),t.setRequestHeader("Content-type","application/json");var e={username:this.$auth.user.name,avatar_url:"",content:"User "+this.$auth.user.name+" reported comment "+this.commentData.id+" from user "+this.commentData.creator.name+' for the content "'+this.commentData.content+'".'};t.send(JSON.stringify(e))},date(){let t=this.commentData.updatedAt.split("T");return t[0]}},components:{}},lt=ct,dt=Object(u["a"])(lt,et,st,!1,null,"2d68b1f4",null),mt=dt.exports,ut=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"createCommentComp form"},[s("footer",{staticClass:"createCommentFooter fixed-bottom"},[s("div",{staticClass:"row p-1"},[s("div",{staticClass:"col-3"},[s("button",{staticClass:"btn bg-light btnMargin shadow",on:{click:function(e){t.backToHome()}}},[t._v("Back")])]),t._v(" "),this.$auth.user.email_verified?s("div",{staticClass:"col-6 p-0"},[s("div",{staticClass:"md-form pink-textarea active-pink-textarea-2"},[s("textarea",{directives:[{name:"model",rawName:"v-model",value:t.newComment.content,expression:"newComment.content"}],staticClass:"md-textarea form-control",attrs:{id:"form17",placeholder:"Comment here...",rows:"2"},domProps:{value:t.newComment.content},on:{keyup:function(e){if(!("button"in e)&&t._k(e.keyCode,"enter",13,e.key,"Enter"))return null;t.addComment()},input:function(e){e.target.composing||t.$set(t.newComment,"content",e.target.value)}}})])]):t._e(),t._v(" "),this.$auth.user.email_verified?s("div",{staticClass:"col-3"},[s("button",{staticClass:"btn bg-light shadow btnMargin",attrs:{type:"submit"},on:{click:t.addComment}},[t._v("Send")])]):t._e(),t._v(" "),this.$auth.user.email_verified?t._e():s("div",{staticClass:"col-9 text-left text-white font-didact"},[t._v("\n        In order to comment, please verify your email: "),s("b",[t._v(t._s(this.$auth.user.email))])])])])])},pt=[],ht={name:"createCommentComp",data(){return{newComment:{}}},computed:{activePost(){return this.$store.state.activePost}},methods:{addComment(){this.activePost.support.find(t=>t==this.$auth.userInfo.email)?this.newComment.support=!0:this.newComment.support=!1,this.newComment.postId=this.activePost.id,this.$store.dispatch("addComment",this.newComment),this.newComment={}},backToHome(){this.$router.push({name:"home"})}},components:{}},vt=ht,ft=(s("ac47"),Object(u["a"])(vt,ut,pt,!1,null,"460f396b",null)),Ct=ft.exports,gt={name:"postDetails",data(){return{thread:""}},mounted(){this.$store.dispatch("getPost",this.$route.params.postId),this.$store.dispatch("getComments",this.$route.params.postId)},computed:{comments(){return this.post&&this.post.support&&this.post.support.find(t=>t==this.$auth.user.email)?(this.thread="Support",this.$store.state.comments.filter(t=>1==t.support)):(this.thread="Disregard",this.$store.state.comments.filter(t=>0==t.support))},post(){return this.$store.state.activePost}},methods:{deletePost(){Swal.fire({title:"Are you sure?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!"}).then(t=>{t.value&&(Swal.fire("Deleted!","Your Post has been deleted.","success"),this.$store.dispatch("deletePost",this.post.id))})},reportPost(){var t=new XMLHttpRequest;t.open("POST","https://discordapp.com/api/webhooks/"+rt),t.setRequestHeader("Content-type","application/json");var e={username:"Captain Hook",avatar_url:"",content:"User "+this.$auth.user.name+" reported the post id "+this.post.id+" from user "+this.post.creatorEmail+' for the post "'+this.post.title+'".'};t.send(JSON.stringify(e))}},components:{CommentComp:mt,CreateCommentComp:Ct,ResultsComp:R}},_t=gt,bt=Object(u["a"])(_t,Z,tt,!1,null,"b2aac6da",null),wt=bt.exports,yt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"about"})},Pt=[],$t={name:"about",data(){return{}},computed:{},methods:{},components:{}},xt=$t,Dt=Object(u["a"])(xt,yt,Pt,!1,null,"19d8aba9",null),kt=Dt.exports,Et=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"noRoute container-fluid vh-100 bgImage"},[a("div",{staticClass:"row",staticStyle:{height:"6rem"}}),t._v(" "),a("div",{staticClass:"row"},[a("div",{staticClass:"col-12 mt-3"},[t._m(0),t._v(" "),a("div",[a("img",{staticClass:"h-75 w-75",attrs:{src:s("94c3"),alt:"Betaaa!"},on:{click:function(e){t.routeHome()}}})]),t._v(" "),t._m(1)])])])},Ot=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("h2",{staticClass:"lost w-50 m-auto py-1"},[t._v("\n        oops!\n        "),s("br"),t._v(" "),s("strong",[t._v("betasaur is lost")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("h4",{staticClass:"fixed-bottom"},[s("strong",[t._v("Requested page was not found...")]),t._v(" "),s("br"),t._v(" "),s("span",{staticClass:"text-danger"},[t._v("404")])])}],Rt={name:"noRoute",data(){return{}},computed:{},methods:{routeHome(){this.$router.push({name:"home"})}},components:{}},St=Rt,At=(s("c59a"),Object(u["a"])(St,Et,Ot,!1,null,"4897661a",null)),Bt=At.exports;a["a"].use(b["a"]);let Lt=new b["a"]({routes:[{path:"/",name:"home",component:F},{path:"/profile",name:"profile",component:K,beforeEnter:v["b"]},{path:"/posts/:postId",name:"postDetails",component:wt,beforeEnter:v["b"]},{path:"/about",name:"about",component:kt},{path:"*",name:"noRoute",component:Bt}]});Lt.beforeEach((t,e,s)=>{"home"!=t.name&&s({name:"home"}),s()});var Tt=Lt,It=s("2f62"),Mt=s("8055"),jt=s.n(Mt);let Nt={};function Vt(t,e){try{Nt.emit("dispatch",{action:t,data:e})}catch(s){console.error("[SOCKET_ERROR]",s)}}const Ut={state:{socket:{}},mutations:{setSocket(t,e){t.socket=e}},actions:{initializeSocket({commit:t,dispatch:e},s){Nt=jt()(Ht),t("setSocket",Nt),Nt.on("CONNECTED",()=>{console.log("connected"),Nt.emit("AUTHENTICATE",s)}),Nt.on("AUTHENTICATED",t=>{console.log("CONNECTED TO ECHO",t)}),Nt.on("DISPATCH_ERROR",t=>{t&&console.error(t)}),Nt.on("JOINED_ROOM",t=>{console.log("JOINED ROOM",t)}),Nt.on("LEFT_ROOM",t=>{console.log("LEFT ROOM",t)}),Nt.on("New_Comment",t=>{e("getComments",t.postId),console.log("socket.on",t)})},JoinRoom({commit:t},e){Vt("JoinRoom",e)},LeaveRoom({commit:t},e){Vt("LeaveRoom",e)}}};a["a"].use(It["a"]);const Ht=window.location.host.includes("localhost")?"//localhost:3000/":"/";let Jt=l.a.create({baseURL:Ht+"api/",timeout:1e4,withCredentials:!0});var zt=new It["a"].Store({state:{user:{},post:{},activePost:{support:[],disregard:[]},posts:[],comments:[],choice:{},loadingPosts:!1,lastLoaded:!1,timestamp:""},mutations:{setUser(t,e){t.user=e},setPost(t,e){t.post=e},setPosts(t,e){t.posts.push(...e)},setActivePost(t,e={support:[],disregard:[]}){t.activePost=e},setComments(t,e){t.comments=e},setLoadingPosts(t,e){t.loadingPosts=e},setLastLoaded(t,e){t.lastLoaded=e},setRemovePost(t,e){let s=t.posts.find(t=>t.id==e);t.posts.splice(s,1)},setTimestamp(t,e){t.timestamp=e}},actions:{setBearer({dispatch:t},e){Jt.defaults.headers.authorization=e,t("initializeSocket",e)},resetBearer(){Jt.defaults.headers.authorization=""},async getProfile({commit:t}){try{let e=await Jt.get("profile");t("setUser",e.data)}catch(e){console.error(e)}},async addUserInput({commit:t,dispatch:e},s){try{await Jt.put("posts/"+s.id+"/vote",s)}catch(a){console.error(a)}},async getPosts({commit:t,dispatch:e},s){return new Promise(async(e,a)=>{try{let a=await Jt.get("posts?skip="+s);console.log("from get posts in store",a),t("setPosts",a.data),e(),0==a.data.length&&t("setLastLoaded",!0)}catch(o){console.error(o,"failed to get posts from get posts in store"),a(o)}finally{t("setLoadingPosts",!1)}})},async getPost({commit:t,dispatch:e},s){try{let a=await Jt.get(`posts/${s}`);a.data.id&&t("setActivePost",a.data),a.data.support&&a.data.support.find(t=>t==this.$app.$auth.user.email)?e("JoinRoom",a.data.id+":support"):e("JoinRoom",a.data.id+":disregard")}catch(a){console.error(a)}},async addPost({commit:t,dispatch:e},s){try{await Jt.post("posts",s);console.log("addPost from store",s),window.location.reload()}catch(a){console.error(a,"addPost in store failing")}},async deletePost({commit:t,dispatch:e},s){try{e("removeFromArray",s),await Jt.delete("posts/"+s);let a=[];t("setPosts",a),Tt.push({name:"home",params:{}})}catch(a){console.error("deletePost failed: ",a)}},removeFromArray({commit:t},e){t("setRemovePost",e)},async getComments({commit:t},e){try{let s=await Jt.get("posts/"+e+"/comments");t("setComments",s.data)}catch(s){console.error("getComments failing",s)}},async addComment({dispatch:t},e){try{let t=await Jt.post("comments/",e);console.log("addComment: ",t.data)}catch(s){console.error("addComment failing: ",s)}},async deleteComment({dispatch:t},e){try{await Jt.delete("comments/"+e.id),t("getComments",e.postId)}catch(s){console.error("deleteComment failed: ",s)}}},modules:{SocketStore:Ut}});a["a"].use(v["a"],{domain:at,clientId:it,audience:ot,onRedirectCallback:t=>{Tt.push(t&&t.targetUrl?t.targetUrl:window.location.pathname)}});var qt=nt;j.a.initializeApp(qt);const Ft=new a["a"]({router:Tt,store:zt,axios:l.a,render:function(t){return t(_)}});zt.$app=Ft,Ft.$mount("#app")},"5c0b":function(t,e,s){"use strict";var a=s("9c0c"),o=s.n(a);o.a},"71fd":function(t,e,s){},"94c3":function(t,e,s){t.exports=s.p+"img/GreenBetasaur.bc756708.png"},"9c0c":function(t,e,s){},ac47:function(t,e,s){"use strict";var a=s("cbba"),o=s.n(a);o.a},c59a:function(t,e,s){"use strict";var a=s("3c7c"),o=s.n(a);o.a},cbba:function(t,e,s){},d6f3:function(t,e,s){}});